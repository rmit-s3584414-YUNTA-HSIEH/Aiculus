<!--bar one detail-->

<!--Embed the header.html template at this location-->
{{ template "header.html" .}}
<!--page content-->
<div id="page-content-wrapper">
    <div class="container-fluid">
        <div class="row">
            <div class="col-6">
                <div id="columnChart" style="height:300px"></div>
            </div>
            <div class="col-6">
                <div id="barChart" style="height:300px"></div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div>
                    <p hidden>{{ .id }}</p>
                    <h1>GICS Details</h1>
                    <table id="table">
                    </table>
                </div>  
            </div>           
        </div>
    </div>
</div>

<script>
    // Load Charts and the corechart package.
   google.charts.load('current', { 'packages': ['corechart'] });

    // Draw the bar chart when Charts is loaded.
    google.charts.setOnLoadCallback(drawcolumnChart);
    // Draw the column chart when Charts is loaded.
    google.charts.setOnLoadCallback(drawBarChart);

    function drawcolumnChart() {
        $.ajax({
            url: 'http://localhost:8080/barChart1',
            dataType: 'json',
            success: function (jsonData) {
                var data = new google.visualization.DataTable();
                
                data.addColumn('string','name');
               // data.addColumn({ type: 'string', role: 'annotation' });
                data.addColumn('number','presentage');
                for(var i=0;i<11;i++){
                    data.addRows([[jsonData[i].name, jsonData[i].spresentage]]);
                }
                var options = {
                    title: 'GICS Sectors',
                }

        var chart = new google.visualization.ColumnChart(
            document.getElementById('columnChart'));

        chart.draw(data, options);
    }

    });
    }

    function drawBarChart() {

            var data = google.visualization.arrayToDataTable([
                ['City', '2010 Population',],
                ['New York City, NY', 8175000],
                ['Los Angeles, CA', 3792000],
                ['Chicago, IL', 2695000],
                ['Houston, TX', 2099000],
                ['Philadelphia, PA', 1526000]
            ]);

            var options = {
                title: 'Population of Largest U.S. Cities',
                chartArea: { width: '50%' },
                hAxis: {
                    title: 'Total Population',
                    minValue: 0
                },
                vAxis: {
                    title: 'City'
                }
            };

            var chart = new google.visualization.BarChart(document.getElementById('barChart'));

            chart.draw(data, options);
        }

</script>



<script>
    $('#table').bootstrapTable({
        
        pagination:true,
        pageNumber:1,
        pageSize:5,
        pageList: [20, 50, 100, 150],
        url: 'http://localhost:8080/barChart1',
        columns:[{
            field: 'code',
            title:'GICS code'
        },
        {
            field:'name',
            title:'Name'
        },
        /*
        {
            field: 'bvaule',
            title: 'bvaule'
        },
        {
            field: 'svaule',
            title: 'svaule'
        },
        */
        {
            field:'spresentage',
            title:'Portfolio'            
        },
        {
            field: 'bpresentage',
            title: 'Benchmark'
        },
        {
            field: 'diff',
            title: 'Difference'
        },]   
    });

    $('#table').on('click-row.bs.table', function(e, row, $element) {
        alert(row.name+" "+row.code+" "+row.spresentage+" "+row.bpresentage+" "+ row.diff);
        window.location.assign("http://localhost:8080/details/"+row.code);
        
         alert(data.code);               
    });
</script>



<!--Embed the footer.html template at this location-->
{{ template "footer.html" .}}